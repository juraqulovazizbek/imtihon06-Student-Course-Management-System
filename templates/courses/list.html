<!-- templates/courses/list.html -->
{% extends "base.html" %}
{% block title %}Courses{% endblock %}

{% block content %}
<section class="card">
  <div class="header">
    <div>
      <h1 class="h1">Courses</h1>
      <p class="sub">Kurslar ro‘yxati: nomi, davomiyligi va studentlar soni.</p>
    </div>
    <div class="actions">
      <a class="btn primary" href="/courses/create/">+ Create course</a>
    </div>
  </div>

  <table class="table">
    <thead>
      <tr>
        <th>Title</th>
        <th>Duration</th>
        <th>Students</th>
        <th style="width:260px;">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for course in courses %}
        <tr>
          <td>
            <strong>{{ course.title }}</strong>
            {% if course.description %}
              <div class="help">{{ course.description|truncatechars:90 }}</div>
            {% endif %}
          </td>
          <td><span class="badge">{{ course.duration_weeks }} weeks</span></td>
          <td>
            <span class="badge">
                {{ course.enrollment_set.count }}
            </span>
          </td>

          <td>
            <div class="actions">
              <a class="btn" href="/courses/{{ course.id }}/">Detail</a>
              <a class="btn" href="/courses/{{ course.id }}/edit/">Edit</a>
              <form method="post" action="/courses/{{ course.id }}/delete/" style="display:inline;">
                {% csrf_token %}
                <button class="btn danger" type="submit">Delete</button>
              </form>
            </div>
          </td>
        </tr>
      {% empty %}
        <tr><td colspan="4" class="help">Hozircha kurs yo‘q.</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="footer-note">
    Delete sharti: kursga studentlar yozilgan bo‘lsa — o‘chirish mumkin emas (xabar chiqishi kerak).
  </div>
</section>
{% endblock %}
