<!-- templates/courses/detail.html -->
{% extends "base.html" %}
{% block title %}Course detail{% endblock %}

{% block content %}
<section class="grid two">
  <div class="card">
    <div class="header">
      <div>
        <h1 class="h1">{{ course.title }}</h1>
        <p class="sub">Course detail sahifasi.</p>
      </div>
      <div class="actions">
        <a class="btn" href="/courses/{{ course.id }}/edit/">Edit</a>
        <form method="post" action="/courses/{{ course.id }}/delete/" style="display:inline;">
          {% csrf_token %}
          <button class="btn danger" type="submit">Delete</button>
        </form>
      </div>
    </div>

    <div class="grid">
      <div>
        <span class="badge">Duration: {{ course.duration_weeks }} weeks</span>
        <span class="badge">Created: {{ course.created_at|date:"Y-m-d H:i" }}</span>
      </div>

      <div>
        <label>Description</label>
        <div class="help">
          {% if course.description %}{{ course.description }}{% else %}—{% endif %}
        </div>
      </div>
    </div>

    <div class="actions" style="margin-top:14px;">
      <a class="btn ghost" href="/courses/">← Back to courses</a>
    </div>
  </div>

  <div class="card">
    <div class="header">
      <div>
        <h2 class="h1" style="font-size:18px;">Enrolled students</h2>
        <p class="sub">Shu kursga yozilgan studentlar.</p>
      </div>
      <span class="badge">
        Count: {{ students|length }}
      </span>
    </div>

    <table class="table">
      <thead>
        <tr>
          <th>Full name</th>
          <th>Email</th>
          <th>Age</th>
        </tr>
      </thead>
      <tbody>
        {% for s in students %}
          <tr>
            <td><a class="btn ghost" href="/students/{{ s.id }}/" style="padding:0;border:none;background:none;">{{ s.full_name }}</a></td>
            <td class="help">{{ s.email }}</td>
            <td><span class="badge">{{ s.age }}</span></td>
          </tr>
        {% empty %}
          <tr><td colspan="3" class="help">Bu kursga hali student yozilmagan.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
{% endblock %}
